<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FIREWALLED</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #1c1c1c;
  color: #eee;
  text-align: center;
  padding: 40px;
}
h1 { font-size: 5em; margin-bottom: 20px; text-align: center; }
p { font-size: 1em; text-align: center; }
#points { font-size: 1.2em; margin-bottom: 15px; }

.slot-machine {
  display: grid;
  grid-template-columns: repeat(3, 80px);
  grid-template-rows: repeat(3, 80px);
  gap: 8px;
  justify-content: center;
  margin: 20px auto;
}
.slot {
  background: #2c2c2c;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2em;
  box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
  transition: transform 0.3s;
}
.slot.win { animation: pop 0.5s ease; }
@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.5); }
  100% { transform: scale(1); }
}

button {
  margin: 10px;
  padding: 10px 20px;
  background: #444;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1em;
  transition: background 0.2s;
}
button:hover { background: #666; }

.shop {
  margin-top: 30px;
  padding: 20px;
  background: #252525;
  border-radius: 12px;
  display: inline-block;
}
.shop-item {
  margin: 10px 0;
  padding: 10px;
  border-radius: 10px;
  background: #333;
}

.popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  visibility: hidden;
  opacity: 0;
  transition: 0.3s;
}
.popup.active { visibility: visible; opacity: 1; }
.popup-content {
  background: #222;
  padding: 30px;
  border-radius: 15px;
  text-align: center;
  max-width: 300px;
}

.win-message {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #222;
  color: #fff;
  padding: 12px 20px;
  border-radius: 12px;
  font-size: 18px;
  animation: fade 2s ease forwards;
  z-index: 1000;
}
@keyframes fade {
  0% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
  10% { opacity: 1; transform: translateX(-50%) translateY(0); }
  90% { opacity: 1; }
  100% { opacity: 0; transform: translateX(-50%) translateY(10px); }
}
</style>
</head>
<body>

<h1>FIREWALLED</h1>
<p>–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ –∫–∞–∑–∏–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–º—ã—Å–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Å—Ç–æ–∏—Ç –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Å–µ—Ä—å—ë–∑. –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã –Ω–µ—Å—É—Ç —Ä–∏—Å–∫–∏: —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏, –¥–æ–ª–≥–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.</p>
<p>–û—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –∞–∑–∞—Ä—Ç—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ –∫–∞–∑–∏–Ω–æ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –≤—ã–∏–≥—Ä—ã—à–µ, –∞ –∏–≥—Ä–æ–∫ ‚∏∫ –≤ –ø—Ä–æ–∏–≥—Ä—ã—à–µ.</p>

<div id="points">–ö—Ä–æ–Ω—ã: 0</div>
<button onclick="spinReels()">–ö—Ä—É—Ç–∏—Ç—å!</button>

<div class="slot-machine">
  <div class="slot" id="slot-0-0">üïäÔ∏è</div>
  <div class="slot" id="slot-0-1">ü¶à</div>
  <div class="slot" id="slot-0-2">üíé</div>
  <div class="slot" id="slot-1-0">ü¶æ</div>
  <div class="slot" id="slot-1-1">ü•º</div>
  <div class="slot" id="slot-1-2">ü¶¢</div>
  <div class="slot" id="slot-2-0">üêß</div>
  <div class="slot" id="slot-2-1">ü¶¢</div>
  <div class="slot" id="slot-2-2">üêß</div>
</div>

<div class="shop">
  <h3>üõí –ú–∞–≥–∞–∑–∏–Ω</h3>
  <p>–°–∫—Ä–∏–Ω —á–µ–∫–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (–∫—Ä–æ–º–µ —à–æ–∫–æ–ª–∞–¥–∫–∏) —Å–∫–∏–¥—ã–≤–∞—Ç—å –≤ –∞–Ω–∫–µ—Ç–Ω–∏—Ü—É —Å–µ—Ç–∫–∏.</p>
      <div class="shop-item">
    <span>–®–æ–∫–æ–ª–∞–¥–∫–∞ ¬´Eclipse Bar¬ª</span><br/>
    <button onclick="buyItem('–®–æ–∫–æ–ª–∞–¥–∫—É ¬´Eclipse Bar¬ª', 50)">–ö—É–ø–∏—Ç—å –∑–∞ 50 –∫—Ä–æ–Ω</button>
  </div>
      <div class="shop-item">
    <span>–ë—Ä–æ–Ω—å (–¥–ª—è –ö–ü) –Ω–∞ 10 –¥–Ω–µ–π</span><br/>
    <button onclick="buyItem('–ë—Ä–æ–Ω—å (–¥–ª—è –ö–ü) –Ω–∞ 10 –¥–Ω–µ–π', 1250)">–ö—É–ø–∏—Ç—å –∑–∞ 1250 –∫—Ä–æ–Ω</button>
  </div>
      <div class="shop-item">
    <span>–ü–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂—É –ø—Ä–µ–¥–º–µ—Ç (–Ω–∞ –≤—ã–±–æ—Ä)</span><br/>
    <button onclick="buyItem('–ü–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂—É –ø—Ä–µ–¥–º–µ—Ç (–Ω–∞ –≤—ã–±–æ—Ä)', 2500)">–ö—É–ø–∏—Ç—å –∑–∞ 2500 –∫—Ä–æ–Ω</button>
  </div>
  <div class="shop-item">
    <span>–ö—É–ø–æ–Ω ¬´–ê–Ω–∫–µ—Ç–∞ –±–µ–∑ –ø—Ä–æ–±–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ (–¥–ª—è –§–ü)¬ª</span><br/>
    <button onclick="buyItem('–ö—É–ø–æ–Ω ¬´–ê–Ω–∫–µ—Ç–∞ –±–µ–∑ –ø—Ä–æ–±–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ (–¥–ª—è –§–ü)¬ª', 15000)">–ö—É–ø–∏—Ç—å –∑–∞ 15000 –∫—Ä–æ–Ω</button>
  </div>
    <div class="shop-item">
    <span>–ë–∞–Ω</span><br/>
    <button onclick="buyItem('–ë–∞–Ω', 100000)">–ö—É–ø–∏—Ç—å –∑–∞ 100000 –∫—Ä–æ–Ω</button>
  </div>
      <div class="shop-item">
    <span>–†–∞–∑–±–∞–Ω</span><br/>
    <button onclick="buyItem('—Ä–∞–∑–±–∞–Ω', 1000000)">–ö—É–ø–∏—Ç—å –∑–∞ 1000000 –∫—Ä–æ–Ω</button>
  </div>
</div>
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <h2 id="popup-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
    <p id="popup-text"></p>
    <button onclick="closePopup()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const symbols = ["ü¶¢","ü•º","ü¶æ","üïäÔ∏è","ü¶à","üïµÔ∏è","ü¶ê","ü¶Ä","üê≥","üì∏"];
let points = 50;
let streak = 0;

// --- –∑–∞–≥—Ä—É–∑–∫–∞ / —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ---
function loadState() {
  const saved = JSON.parse(localStorage.getItem("slot-state"));
  if(saved){ points = saved.points; }
  updatePoints();
}
function saveState(){ localStorage.setItem("slot-state", JSON.stringify({points})); }
function updatePoints(){ document.getElementById("points").textContent = "–ö—Ä–æ–Ω—ã: " + points; }

// --- —Å–æ–æ–±—â–µ–Ω–∏—è ---
function showWinMessage(msg){
  const div = document.createElement("div");
  div.className="win-message";
  div.textContent=msg;
  document.body.appendChild(div);
  setTimeout(()=>div.remove(),2000);
}
function showPopup(title,text){
  document.getElementById("popup-title").textContent = title;
  document.getElementById("popup-text").textContent = text;
  document.getElementById("popup").classList.add("active");
}
function closePopup(){ document.getElementById("popup").classList.remove("active"); }

// --- –∞–Ω–∏–º–∞—Ü–∏–∏ ---
function animateRow(index,type){
  for(let i=0;i<3;i++){
    let el = (type==="h") ? document.getElementById(`slot-${index}-${i}`) : document.getElementById(`slot-${i}-${index}`);
    el.classList.add("win");
  }
}
function animateDiagonal(dir){
  if(dir==="main"){ [[0,0],[1,1],[2,2]].forEach(([i,j])=>document.getElementById(`slot-${i}-${j}`).classList.add("win")); }
  else{ [[0,2],[1,1],[2,0]].forEach(([i,j])=>document.getElementById(`slot-${i}-${j}`).classList.add("win")); }
}

// --- –±–æ–Ω—É—Å—ã ---
function calculateBonus(grid){
  let bonus=0;
  const flat=grid.flat();
  const counts={};
  for(let s of flat){ counts[s]=(counts[s]||0)+1; }

  // 3 –≤ —Ä—è–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ / –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ / –¥–∏–∞–≥–æ–Ω–∞–ª–∏
  for(let i=0;i<3;i++){
    if(grid[i][0]===grid[i][1] && grid[i][1]===grid[i][2]){ bonus+=2; animateRow(i,"h"); }
    if(grid[0][i]===grid[1][i] && grid[1][i]===grid[2][i]){ bonus+=2; animateRow(i,"v"); }
  }
  if(grid[0][0]===grid[1][1] && grid[1][1]===grid[2][2]){ bonus+=2; animateDiagonal("main"); }
  if(grid[0][2]===grid[1][1] && grid[1][1]===grid[2][0]){ bonus+=2; animateDiagonal("anti"); }

  // 4 / 6 / 9 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö
  for(const s in counts){
    if(counts[s]>=4 && counts[s]<6) bonus+=4;
    if(counts[s]>=6 && counts[s]<9) bonus+=6;
    if(counts[s]===9) bonus+=15;
  }

  return bonus;
}

// --- —Å–ø–∏–Ω ---
function spinReels(){
if (points <= 0) {
  alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–æ–Ω! –ü—Ä–∏—Ö–æ–¥–∏ –∑–∞–≤—Ç—Ä–∞");
  return;
}
  points--;
  updatePoints();

  const grid=[];
  for(let i=0;i<3;i++){
    const row=[];
    for(let j=0;j<3;j++){
      const symbol=symbols[Math.floor(Math.random()*symbols.length)];
      document.getElementById(`slot-${i}-${j}`).textContent=symbol;
      document.getElementById(`slot-${i}-${j}`).classList.remove("win");
      row.push(symbol);
    }
    grid.push(row);
  }

  let bonus=calculateBonus(grid);

  if(bonus>0){
    streak++;
    points+=bonus;
    updatePoints();
    showWinMessage(`–ö–æ–º–±–æ! +${bonus} –∫—Ä–æ–Ω (x${streak})`);
  } else streak=0;

  saveState();
}

// --- –º–∞–≥–∞–∑–∏–Ω ---
function buyItem(name, cost){
  if(points<cost){ alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–æ–Ω!"); return; }
  points-=cost;
  updatePoints();
  saveState();
  const id=Math.floor(Math.random()*1000000);
  showPopup(`–¢—ã –ø—Ä–∏–æ–±—Ä—ë–ª "${name}"!`, `ID: ${id}`);
}

loadState();
</script>
</body>
</html>
